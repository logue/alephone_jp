TODO リスト

メインアプリケーションクラス(MapEditorWX)
済み・アイコンビットマップの読み込み
細分化に任せる・マウスイベントの記述

-AlephOneSrcのDLL作りたいな…
-XRCだめすぎｗ。クラスのインスタンスそのまま作っちゃうって何だよwどう拡張すればいいんだｗ
-rad1が#defineされてた。ネーヨｗ
-rad2もか！


済み-新規マップ
-保存
細分化-ダイアログ作り
細分化--プロパティ
細分化--ターミナル
細分化--テクスチャ
--ビジュアル
-メニューコマンド
-ポリゴン整合性判定
-選択・移動
-アノテーション/点/線/ポリゴン追加

-右クリックor Alt+クリックでメニュー

///MAXIMUM_VERTICES_PER_POLYGON=8

１：wxGladeる
２：配置
３：呼び出し処理記述
４：データ入出力記述
５：デバッグ完了（完）

Annotation		:完（選択モードは未完）
ColorCustomize	:完
EditPreferences	:完
Height			:完
HeightPallet	:配置
LevelInfo		:配置
LineProp		:配置
ObjectProp		:入出力
Placement		:入出力
Platform		:配置
PointProp		:入出力
PolygonNum		:完
PolygonProp		:入力
PolygonType		:配置
SideProp		:
Terminal		:入力
Texture			:配置
Tool			:完
Visual			:( ﾟдﾟ )

XXXX JumpLevel
SelectLevel		:完
MediaPalette	:配置
LightPalette	:配置
SoundPalette	:配置

○イベント処理の記述は終わっているか？のリスト
・TODOありならその内容を書く
・完成なら完成と書く
Draw
	Arrow
		済み・単一選択
		・テキスト選択→アノテーションダイアログを出す
	Fill
		済み・塗れるポリゴン探しが未完
	済み Hand
	Line
		・点の独立追加
		・線はすでにある点を指定しての追加にする
		・線を分断する際は調整すべし
	Magnify
		・Shiftを押している間はアイコンをマイナスにする
	Skull
	Text
		・まだテキストを追加できていない
	Polygon
		・プリセット選択ダイアログを出す
Poly
FloorHeight
CeilingHeight
FloorLight
CeilingLight
Media
FloorTexture
CeilingTexture

○線の追加
線モードでは拡大縮小を抑止するべきか？

1:点の上でクリック
	1:最初のクリック
		前回クリック点の更新
	2:二回目以降のクリック
		1:既に線が存在している
			何もしない
		2:線は存在していない
			線の追加
		前回クリック点の更新
2:線の上でクリック
	1:最初のクリック
		1:ポリゴンに所属する線
			警告を出して何もしない
		2:所属しない線
			その線を削除
			点を追加
			線の始点→新点を終点とした新線を追加
			新点→線の終点を終点とした新線を追加
			前回クリック点の更新
	2:二回目以降のクリック
		同上
3:空白でのクリック
	1:最初のクリック
		点の追加
		「前回クリック点」の登録
	2:二回目以降のクリック
		点の追加
		「前回クリック点」の更新

TODO 上に書いた線の追加部分を作成

○疑問
std::map<int,int>の要素を一つ削除(erase)した場合、各要素のポインタ（メモリ位置）はどうなるのか？
またvector,listは？
→削除できるが、ポインタは操作後で変化してしまう。

○削除・追加
・追加
追加はご自由に。dynamic_worldの値も変更する
・削除
削除してしまうと順番がばらばらになってしまう。
削除や順番の整理は保存時などにまとめて行うようにする。
そのためには削除予定のフラグを別個で用意する必要がある。

整理(fix)するタイミングは
１：保存時
２：編集が一段落したら
３：
点を消したら線も消したいので、

表示時は削除対象をスキップすればよい。
Fix時に順番整理もする
依存関係
点→線の端点（ポリゴンの一部）
線→点、Side、ポリゴン
ポリゴン→線、点、オブジェクト、Side

Terminal encode->Marathon 文字列データ
decode->char
保存時にエンコードすることを忘れずに！

TODO ダイアログの作成
TODO VisualMode oh visual mode!
TODO Polygon tool
TODO 範囲外のものが選択できるバグ
済み TODO スライダーを動かすと0に固定されてしまう
	→ev.ではなく、直接オブジェクトから値をとればOK。GetInt()は0が返る
TODO 一番上がMinになってる
TODO ObjectPlacement
済み TODO MediaListって初期状態で入ってるものなの？
	→たぶん入ってない？
--
TODO 2007 07 01
済み Jump (Select) other level
object place
placement dialog edit <-> listctrl
object/point/side/line prop
adding line
no editable when layer disabled in preferences
fit to grid
color customize
polygon type dialog
heights/light/media/sound palette
texture dialog
load textures from shapes file
level info dialog I/O
済み double click when line tool using
注意 LineListなどのvectorにpush_back,removeなどをすると、メモリの再割り当て（サイズ変更）
	によってポインタアドレスが変化することがある。
	追加・削除した場合、これまでに保持しているline_data*などのポインタは使わないこと！

済み quickSortの検証
済み TODO 線追加中と追加終了（開始前）とでカーソルの形を変える
TODO テクスチャ読み込み
TODO 高さ・Media・Light

TODO 線追加：初期化→線上クリックで次のクリックにつながらない
TODO 既にあるところにポリゴンを追加しようとすると変になる（描画されないのに触れる）
済み LevelInfoを選ぶと全部消えるバグ

TODO アイテムを動かしたらisChanged = trueにする
	そのときタイトルを MapEditorOneWX * [レベル番号] [レベル名]にする
TODO Merge Map メニューアイテムの追加
TODO 読み込み→保存の時に、デフォルトをレベル名にする？

TODO サウンド選択→死亡
TODO 他のオブジェクトを選択しても、動かしたりしないと変わらない
	Refresh?
済み TODO ポリゴン塗りつぶし失敗の時のダイアログがうざい
EditPreferenceDiallogで追加すべきSizerが異なるCheckBoxがある

TODO Platform値反映、変更有効
TODO Placementクリック→テキストボックスに表示

ダイアログの返し記号はwxID_OKに統一。
wxOKはスタイル設定用。

TODO Shapesデータ読み込み
TODO 壁（たかだか片方のポリゴンしか存在しない線）・高さが同じ線・高さが異なる線では描画が異なる
・両方にポリゴンがない
		→Lines
・片方にポリゴンがない
		→Lines
・両方ある
	・SOLIDだ
		→Lines
	・TRANSPARENTだ
		・両方のポリゴンが同じ高さだ
			→SameHeightLines
		・異なる高さだ
			→StairLines
			
TODO 高さ別表示
TODO テクスチャでポリゴン表示
TODO コピペ

TODO セレクト解除・他をセレクトした場合にダイアログの設定をNONEにする部分
	処理が遅くなりがちなので、重複処理を行わないように調整
done TODO ObjPropDialogのFacing描画。
	アクションが起こった場合のみに描画すれば良い

TODO setup lights/media/sounds/height dialog
TODO polygon type color
TODO color customizer

ビジュアルモード
render_screen
プレイヤーの位置
・初期値はマップ情報から。
・ポリゴン右クリックでサブメニュー
	・ビジュアルモードスタートポイントの設置を用意
	・ついでにプロパティも用意
ビジュアルモードスタートポイント
Clear()するとカラムまで消される


Map icons (modified) original to Bungie
Bobwithkeycard

TODO Soloは読めるが、Networkマップが見れない
TODO サードパーティ製Shapesが読めない（M2とか）

モンスターの起動条件とか意味不明

//選択物移動
ボタン押す→位置記録
選択決定→
選択解除→
移動中→位置変更
ボタン離す→

//位置記憶
ボタン押す→
選択決定(かつ一つだけ選択)→位置＋物情報
選択上でボタン押す→位置＋物情報
選択解除→
ボタン離す→位置＋物記憶

Deleteキーで削除
Ctrl+C / コピー →記憶
Ctrl+V / ペースト →貼り付け

WinBase.h
#define Yield()
が悪さしていた。
//#define Yield()
にしたら黙った

・ポリゴンだけを選択している場合はEndpoints/Lines/Sidesもコピーする（selectData->realData）
・ポリゴンを先に追加。
・Side/Line/Endpoint/Objectはポリゴンが存在していなければポリゴンインデックスをNONEにする。
・Sideはポリゴンが存在していない場合追加しない

TODO 削除時の処理
TODO MapToolシリーズに、削除情報チェックを付加する。
ポリゴンのプロパティとか意味不明すぎるだろ…

TODO オブジェクト追加処理
TODO オブジェクトの高さ変更後にUndo要素に追加する。
TODO オブジェクトの高さはポリゴンの床からΔで用意

TODO HPLRealMapDataのインデックス記憶部分＆プラットフォームの記憶

TODO オブジェクトの位置はEditCtrlでは操作できないようにする（READONLYにする)
TODO MapViewerへの調整
TODO PhysicsFilesを保存できるようにする（MapDemergerへの布石）
TODO オブジェクトダイアログで設定を変えた場合、Type/Indexが変更されたら
	初期配置数も変える
TODO オブジェクトのType変更しても実体が変更されない
TODO _map_object_hanging_from_ceilingの時は天井からのDeltaで設定するべきか？