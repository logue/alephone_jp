覚書 for HogePiyoとか

これを見た人へ：これは製作者用覚書です。質問があれば答えますが、第三者が見られるように書いてあるわけではないのでそこんとこよろしくお願いします。

・イベント
メニューイベントやマウスイベント等、イベント関連はMapEditorSDIViewに追加すること。
(CMapEditorSDIView)

・定数
NUMBER_OF_POLYGON_TYPEなど各種定数はMapEditorSDI.hに記述。設定ファイルを用意するなど、外部へ移行させたほうがよい。

・Map関数
MapEditorSDI.hおよびMapEditorSDI.cppにはいくつかMap関連の関数がある。
もうすこし整備してHPLLibに収められると良い。
特に点の追加・削除・セットアップなどなどは煩雑になりそうだし、良く分からん部分が多すぎる


--------------------------------
--フラグが立った！
・theApp(CMapEditorOne)の持ち物チェック(イベント管理上特に重要なもの)

-bool isSelectingGroup;
「現在範囲選択中であるかどうか」を指定するもの。
ViewEvent.cppの
void CMapEditorSDIView::setStartPointForSelectGroup(int px, int py)
でtrue。

-POINT selectStartPoint
「選択開始座標」

-----------------------------
・そうでもないけど書いちゃったもの
-CStringArray LevelNameList;
MapEditorSDIView_Event_mMenu.cppで登録
 void CMapEditorSDIView::OnFileOpen()
上記ファイルと、LevelParameterDialog.cpp, SelectLevelDialog.cppで利用。

-int zoomDivision;
割る数。
MapEditorSDI.cpp, MapEditorSDIView.cpp, MapEditorSDIView_Event.cpp, MapEditorSDIView_Event_Menu.cppで利用。
HPLMapTool.cppでは引数として用いられている

-int gridIntervals[NUMBER_OF_GLID];
グリッドの間隔

・マウスイベント整理
-共通
Ctrl+クリック1	なし
Ctrl+D&D		全体移動（Handツールと同様）
Ctrl+ホイール	拡大縮小（虫眼鏡ツール・メニューの拡大縮小・+/^キーと同様）
表示は特になし

-Drawモード
クリック		選択・（無ければ）選択解除
D&D				範囲選択・（無ければ）選択解除・（選択物を）移動
選択時には赤く表示
ポリゴンは斜線表示

範囲選択時には破線の矩形表示。

-Skullモード
クリック		オブジェクト配置

-Lineモード
クリック		はあまりしないほうがいい…(閾値以下なら)
D&D				線を描く（Downが始点。Upが終点に相当）

------------------
＊TheWorld!
・dynamic_worldの数をLineListなどに同期させないと登場しなかったり変になったりする
・ポリゴンは右回りか左回りに登録されている。
　Fix時にはその並びを整えるべし。line_indexesもね
・
